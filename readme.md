# 使用说明：
---
一般的，将需要转换的 oto.ini 和 presamp.ini 放在与程序的同一文件夹内，然后双击打开程序 utau2vs.exe，如果需要，则根据提示重命名音素，如在 utau 中，bao 和 biao 的辅音和元音都可以表示为 [b] 和 [ao]，但在 vs 中表示同一个发音的不同表示，需要重新命名使元辅音不完全相同。

处理完成之后，生成 lsd 和 vsdxmf 文件会默认生成在同一文件夹中，可以继续在 vs 官方的声库制作工具中继续制作。要注意的是在 vs 中开头音是**以开头辅音的形式存在，并不是一个完整的 cv 部**，因此需要重新标记。此外，在 vs 中如果某些线靠得过近或者重叠似乎会报错，还请根据 vs 的打包工具提示对标记进行修改。

另外，无论是否需要更多的自定义选项，都请大致阅读以下说明，以免发生转化错误。

有任何 bug 请提 issue，另外感谢 vs 开发者金刚对我的帮助。

---

## 更新日志

2021.11.27 first release

- 第一个公布的 alpha 版本，仅测试过中文 cvvc，使用前请对相关文件进行保存，作者不对丢失的标记文件做任何担保。

---

## 输入文件
1. oto_file & presamp_file：默认需要将 oto、presamp 和程序放在同一文件夹下。如果你的 oto 文件是放在别的地方比如桌面，那么一般是在等号后面填上 `C:\Users\你的用户名\Desktop\oto.ini`，其他以此类推。
特别的，如果 presamp_file 的参数为 None，那么程序会调用默认的**日语字典**来帮助 vsdxmf 和 lsd 文件的生成。字典包含平假名、片假名和罗马字。另外该字典有些特别的地方需要注意：
 - ガ行的辅音为鼻浊音 ng，但不包括拗音
 - ラ行的辅音为弹闪音 rr，包括拗音
 - ん、ン的发音为 n、ng
 - ふ行的辅音皆表示为 f，包括片假形式，需要普通话中 f 发音的可自行更改区分
 - ゐ、ヰ的发音为い；ゑ、ヱ的发音为え
 - 字典不包含くぁ行和ぐぁ行，从 vcv 录音表进行转置并保留该行的请自行更改

 另外要注意的是，当使用默认词典时程序会跳过重命名，即如果你的录音表是自制，并合并了辅音如 b 和 by，请不要使用默认字典，而是转为使用自己的 presamp.ini

2. rename_file：默认为 None 时，程序会根据实际情况提示用户输入需要更改的音素，全部更改完毕后会记录下来生成一个rename文件（默认放在程序文件夹下），文件类型为txt，可供之后使用避免重复的工作。
也可以提前自行编写，格式为分别列出需要重命名的整音、辅音、元音，中间用半角符号的逗号连接，不能有空格，一行一个，如：
> pa,ph,a
> pai,ph,ai
> ...
> kang,kh,ang  

## 其他参数
1. begin_sign：表示开头音符号，一般的，开头音 [- あ] 的开头音符号为 [-]
2. ending_sign：表示结尾音符号，一般的，结尾音 [a R] 的结尾音符号为 [R] ；此外也有用 [-] 表示结尾，请根据实际需要自行更改。
3. custom_suffix：表示自定义后缀，程序会自动识别如 C4 等音阶后缀，但是如果是飞天胶囊系列声库会有其自定后缀，如：oH, oM, oL 等，请根据实际情况自行更改；此外对于某些多音色可能会有后缀如：PD4 (Power D4), SA3 (Soft E3) 等，也请填写为 PD4, SA3 等，如：
> custom_suffix=oH,oM,oL, ... PD4,SA3

4. encoding：表示编码，默认为 utau 限制的日文编码 shift-jis，可以正常读取大部分的文件，可以按实际需要更改。由于 v# 编码为 utf-8，理论上也可以用切韵表示音素。

## 输出文件
1. lsd_file & vsdxmf_file：输出文件的路径，可以按照实际需要更改，具体参考上文。
2. log_file：改文件记录了没有转化的oto，如：·あ,　あ· 等标记，以及缺少的开头辅音、cv部、vc部、结尾音，缺少这些标记可能会导致 v# 打包失败，可以根据需要进行补充。